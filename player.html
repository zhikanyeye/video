<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <!-- ç½‘ç«™å…ƒä¿¡æ¯ -->
    <meta name="description" content="é’äº‘æ’­ - ä¸“ä¸šè§†é¢‘æ’­æ”¾å™¨é¡µé¢ï¼Œæ”¯æŒå¤šæ ¼å¼æ’­æ”¾å’Œæ’­æ”¾åˆ—è¡¨ç®¡ç†">
    <meta name="keywords" content="è§†é¢‘æ’­æ”¾å™¨,åœ¨çº¿æ’­æ”¾,æ’­æ”¾åˆ—è¡¨,é’äº‘æ’­">
    <meta name="author" content="é’äº‘æ’­å›¢é˜Ÿ">
    <title>é’äº‘æ’­ - è§†é¢‘æ’­æ”¾å™¨</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/player.css">
    
    <!-- ArtPlayer è§†é¢‘æ’­æ”¾å™¨ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/artplayer@5/dist/artplayer.css">
    <script src="https://cdn.jsdelivr.net/npm/artplayer@5/dist/artplayer.js"></script>
    
    <!-- è§†é¢‘æ’ä»¶ -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1/dist/hls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flv.js@1/dist/flv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/artplayer-plugin-hls@5/dist/artplayer-plugin-hls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/artplayer-plugin-flv@5/dist/artplayer-plugin-flv.js"></script>
</head>
<body class="player-page">
    <div class="player-layout">
        <!-- æ’­æ”¾åˆ—è¡¨ä¾§è¾¹æ  -->
        <aside class="playlist-sidebar" id="playlistSidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">
                    <i class="material-icons">queue_music</i>
                    æ’­æ”¾åˆ—è¡¨
                </h2>
                <div class="sidebar-controls">
                    <button id="shuffleBtn" class="control-btn" title="éšæœºæ’­æ”¾">
                        <i class="material-icons">shuffle</i>
                    </button>
                    <button id="repeatBtn" class="control-btn" title="å¾ªç¯æ’­æ”¾">
                        <i class="material-icons">repeat</i>
                    </button>
                    <button id="collapseSidebar" class="control-btn" title="æ”¶èµ·ä¾§è¾¹æ ">
                        <i class="material-icons">chevron_left</i>
                    </button>
                </div>
            </div>
            
            <div class="playlist-info">
                <span class="playlist-stats" id="playlistStats">0/0</span>
                <span class="playlist-duration" id="playlistDuration">00:00:00</span>
            </div>
            
            <div class="playlist-search">
                <div class="search-input-group">
                    <i class="material-icons">search</i>
                    <input 
                        type="text" 
                        id="playlistSearch" 
                        placeholder="æœç´¢æ’­æ”¾åˆ—è¡¨..."
                        aria-label="æœç´¢æ’­æ”¾åˆ—è¡¨"
                    >
                </div>
            </div>
            
            <div class="playlist-content" id="playlistContent">
                <!-- æ’­æ”¾åˆ—è¡¨é¡¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </aside>

        <!-- ä¸»æ’­æ”¾åŒºåŸŸ -->
        <main class="player-main" id="playerMain">
            <!-- é¡¶éƒ¨æ§åˆ¶æ  -->
            <div class="player-topbar">
                <button id="expandSidebar" class="topbar-btn hidden">
                    <i class="material-icons">menu</i>
                </button>
                
                <div class="video-info">
                    <h1 class="video-title" id="videoTitle">åŠ è½½ä¸­...</h1>
                    <div class="video-meta">
                        <span class="video-type" id="videoType">unknown</span>
                        <span class="video-progress" id="videoProgress">1/1</span>
                    </div>
                </div>
                
                <div class="player-actions">
                    <button id="miniPlayerBtn" class="topbar-btn" title="ç”»ä¸­ç”»æ¨¡å¼">
                        <i class="material-icons">picture_in_picture_alt</i>
                    </button>
                    <button id="theaterModeBtn" class="topbar-btn" title="å½±é™¢æ¨¡å¼">
                        <i class="material-icons">crop_landscape</i>
                    </button>
                    <button id="fullscreenBtn" class="topbar-btn" title="å…¨å±">
                        <i class="material-icons">fullscreen</i>
                    </button>
                    <button id="settingsBtn" class="topbar-btn" title="è®¾ç½®">
                        <i class="material-icons">settings</i>
                    </button>
                </div>
            </div>

            <!-- è§†é¢‘æ’­æ”¾å®¹å™¨ -->
            <div class="video-container" id="videoContainer">
                <div class="video-player" id="videoPlayer">
                    <!-- ArtPlayer å°†åœ¨è¿™é‡Œåˆå§‹åŒ– -->
                </div>
                
                <!-- åŠ è½½çŠ¶æ€ -->
                <div class="loading-overlay" id="loadingOverlay">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                    </div>
                    <p class="loading-text">æ­£åœ¨åŠ è½½è§†é¢‘...</p>
                </div>
                
                <!-- é”™è¯¯çŠ¶æ€ -->
                <div class="error-overlay hidden" id="errorOverlay">
                    <div class="error-content">
                        <i class="material-icons error-icon">error_outline</i>
                        <h3 class="error-title">è§†é¢‘åŠ è½½å¤±è´¥</h3>
                        <p class="error-message" id="errorMessage">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–è§†é¢‘é“¾æ¥æ˜¯å¦æœ‰æ•ˆ</p>
                        <div class="error-actions">
                            <button id="retryBtn" class="btn btn-primary">
                                <i class="material-icons">refresh</i>
                                é‡è¯•
                            </button>
                            <button id="skipBtn" class="btn btn-secondary">
                                <i class="material-icons">skip_next</i>
                                è·³è¿‡
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ç©ºçŠ¶æ€ -->
                <div class="empty-overlay" id="emptyOverlay">
                    <div class="empty-content">
                        <i class="material-icons empty-icon">play_circle_outline</i>
                        <h3 class="empty-title">æ²¡æœ‰å¯æ’­æ”¾çš„è§†é¢‘</h3>
                        <p class="empty-message">æ’­æ”¾åˆ—è¡¨ä¸ºç©ºæˆ–æ²¡æœ‰æ‰¾åˆ°è§†é¢‘é“¾æ¥</p>
                        <button id="backToHomeBtn" class="btn btn-primary">
                            <i class="material-icons">home</i>
                            è¿”å›é¦–é¡µ
                        </button>
                    </div>
                </div>
            </div>

            <!-- åº•éƒ¨æ§åˆ¶æ  -->
            <div class="player-controls">
                <div class="controls-left">
                    <button id="prevBtn" class="control-btn" title="ä¸Šä¸€ä¸ª (Ctrl+â†)">
                        <i class="material-icons">skip_previous</i>
                    </button>
                    <button id="playPauseBtn" class="control-btn control-btn-large" title="æ’­æ”¾/æš‚åœ (Space)">
                        <i class="material-icons">play_arrow</i>
                    </button>
                    <button id="nextBtn" class="control-btn" title="ä¸‹ä¸€ä¸ª (Ctrl+â†’)">
                        <i class="material-icons">skip_next</i>
                    </button>
                    
                    <div class="volume-control">
                        <button id="volumeBtn" class="control-btn" title="é™éŸ³ (M)">
                            <i class="material-icons">volume_up</i>
                        </button>
                        <input 
                            type="range" 
                            id="volumeSlider"
                            class="volume-slider"
                            min="0" 
                            max="100" 
                            value="70"
                            aria-label="éŸ³é‡æ§åˆ¶"
                        >
                    </div>
                </div>
                
                <div class="controls-center">
                    <div class="time-display">
                        <span id="currentTime">00:00</span>
                        <span class="time-separator">/</span>
                        <span id="totalTime">00:00</span>
                    </div>
                </div>
                
                <div class="controls-right">
                    <button id="speedBtn" class="control-btn" title="æ’­æ”¾é€Ÿåº¦">
                        <span class="speed-text">1.0x</span>
                    </button>
                    <button id="qualityBtn" class="control-btn" title="ç”»è´¨é€‰æ‹©">
                        <i class="material-icons">hd</i>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- æ’­æ”¾é€Ÿåº¦é€‰æ‹©å¼¹çª— -->
    <div class="speed-menu hidden" id="speedMenu">
        <div class="speed-options">
            <button class="speed-option" data-speed="0.5">0.5x</button>
            <button class="speed-option" data-speed="0.75">0.75x</button>
            <button class="speed-option active" data-speed="1">1.0x</button>
            <button class="speed-option" data-speed="1.25">1.25x</button>
            <button class="speed-option" data-speed="1.5">1.5x</button>
            <button class="speed-option" data-speed="2">2.0x</button>
        </div>
    </div>

    <!-- ç”»è´¨é€‰æ‹©å¼¹çª— -->
    <div class="quality-menu hidden" id="qualityMenu">
        <div class="quality-options" id="qualityOptions">
            <!-- ç”»è´¨é€‰é¡¹å°†åŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <!-- è®¾ç½®å¼¹çª— -->
    <div class="modal" id="playerSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ’­æ”¾å™¨è®¾ç½®</h3>
                <button class="modal-close" id="closePlayerSettingsModal">
                    <i class="material-icons">close</i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="settings-section">
                    <h4>æ’­æ”¾è®¾ç½®</h4>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="autoplayNext" checked>
                            è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€ä¸ªè§†é¢‘
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="rememberVolume" checked>
                            è®°ä½éŸ³é‡è®¾ç½®
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="showNotifications" checked>
                            æ˜¾ç¤ºæ’­æ”¾é€šçŸ¥
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h4>æ˜¾ç¤ºè®¾ç½®</h4>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="showProgressOnTitle">
                            åœ¨æ ‡é¢˜ä¸­æ˜¾ç¤ºæ’­æ”¾è¿›åº¦
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label for="defaultQuality">é»˜è®¤ç”»è´¨</label>
                        <select id="defaultQuality">
                            <option value="auto">è‡ªåŠ¨</option>
                            <option value="1080p">1080p</option>
                            <option value="720p">720p</option>
                            <option value="480p">480p</option>
                            <option value="360p">360p</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥æç¤º -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- åŠ è½½è„šæœ¬ -->
    <script type="module" src="scripts/player.js"></script>
    
    <!-- ä¸´æ—¶è°ƒè¯•è„šæœ¬ -->
    <script src="debug.js"></script>
    <script>
        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œè°ƒè¯•æ£€æŸ¥
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('ğŸ” è‡ªåŠ¨è¿è¡Œè°ƒè¯•æ£€æŸ¥...');
                runAllChecks();
            }, 1000);
        });
    </script>
</body>
</html>
